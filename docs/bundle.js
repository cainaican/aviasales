(()=>{"use strict";var e={800:(e,t,i)=>{i.d(t,{Z:()=>_});var n=i(81),r=i.n(n),o=i(645),s=i.n(o),a=i(667),c=i.n(a),l=new URL(i(715),i.b),d=new URL(i(422),i.b),p=new URL(i(13),i.b),m=new URL(i(747),i.b),f=s()(r()),h=c()(l),u=c()(d),g=c()(p),x=c()(m);f.push([e.id,'@font-face{font-family:"Open Sans";font-weight:normal;font-style:normal;src:url('+h+')}@font-face{font-family:"Open Sans";font-weight:600;font-style:normal;src:url('+u+')}.menu__filters{display:flex;flex-direction:column;margin-right:20px}@media(max-width: 800px){.menu__filters{flex-direction:row;width:110%;margin-right:0px;justify-content:space-between}}.menu__filters-transfer{display:block;box-sizing:border-box;width:232px;font-family:"Open Sans";font-size:13px;background-color:#fff;color:#4a4a4a;box-shadow:0px 2px 8px rgba(0,0,0,.1);border-radius:5px;padding-bottom:16px;margin-bottom:20px}.menu__filters-transfer-list{list-style:none}.menu__filters-transfer-item{padding:0 20px 0 46px;height:40px;line-height:40px;vertical-align:middle;transition:all 150ms ease-out}.menu__filters-transfer-item:first-child{padding:0 20px;letter-spacing:.5px;cursor:default;font-weight:600;font-size:12px;height:52px;line-height:55px}.menu__filters-transfer-item:first-child:hover{background-color:#fff}.menu__filters-transfer-item:hover{background-color:#f1fcff}.input__transfer{position:relative;width:0px;height:0px}.input__transfer::after{content:"";cursor:pointer;text-align:center;border-radius:2px;top:-14px;left:-26px;position:absolute;width:18px;height:18px;border:1px solid #2196f3}.input__transfer:checked:after{content:url('+g+')}@media(max-width: 800px){.menu__filters-transfer{margin-right:10px;height:95%;width:100%}.menu__filters-transfer-item:first-child{line-height:20px}.menu__filters-transfer-item:first-child span{display:inline-block;margin:16px 0px 0px 0px;height:100%}}@media(max-width: 600px){.menu__filters-transfer-item{line-height:20px}.menu__filters-transfer-item:first-child{margin-bottom:10px}}.menu__filters-company{display:block;box-sizing:border-box;width:232px;font-family:"Open Sans";font-size:13px;background-color:#fff;color:#4a4a4a;box-shadow:0px 2px 8px rgba(0,0,0,.1);border-radius:5px;padding-bottom:16px;margin-bottom:20px}.menu__filters-company-list{list-style:none}.menu__filters-company-item{padding:0 20px 0px 46px;position:relative;height:40px;line-height:40px;transition:all 150ms ease-out}.menu__filters-company-item label{cursor:pointer}.menu__filters-company-item:first-child{padding:0 20px;letter-spacing:.5px;cursor:default;font-weight:600;font-size:12px;height:32px;line-height:55px;margin-bottom:10px}.menu__filters-company-item:first-child:hover{background-color:#fff}.menu__filters-company-item:hover{background-color:#f1fcff}.menu__filters-company-item input{width:0px;width:0px}.menu__filters-company-item input::after{content:"";position:absolute;text-align:center;line-height:22px;cursor:pointer;border-radius:50%;top:10px;left:20px;width:18px;height:18px;border:1px solid #2196f3}.menu__filters-company-item input:checked:after{content:url('+x+')}@media(max-width: 800px){.menu__filters-company{margin-right:10px;height:95%;width:100%}}.menu{display:flex;justify-content:space-between;list-style:none;font-family:"Open Sans";font-size:12px;line-height:20px;color:#4a4a4a;margin-bottom:20px}.menu__item{width:166px;font-weight:bold;height:48px;text-align:center;border:1px solid #dfe5ec;background-color:#fff;line-height:48px;letter-spacing:.5px;text-transform:uppercase}.menu__item:first-child{border-top-left-radius:5px;border-bottom-left-radius:5px;border-right:none}.menu__item:last-child{border-top-right-radius:5px;border-left:none;border-bottom-right-radius:5px}.menu__item:hover{background-color:#dfe5ec}.active{background-color:#2196f3;color:#fff}@media(max-width: 800px){.menu{justify-content:space-between}.menu__item{width:100%}}.main__ticket{display:flex;flex-direction:column;width:502px;background-color:#fff;border-radius:5px;margin-bottom:20px;box-shadow:0px 2px 8px rgba(0,0,0,.1)}.main__ticket .header{display:flex;flex-direction:row;justify-content:space-between;height:75px;padding:0px 20px}.main__ticket .header__price{font-family:"Open Sans";font-style:normal;font-weight:600;margin:auto 0;font-size:24px;line-height:24px;color:#2196f3}.main__ticket .header__logo{margin:auto 0}.main__ticket .flight{display:flex;flex-direction:column;font-family:"Open Sans";padding:0px 0px 0px 20px;font-style:normal;font-weight:600;font-size:12px;text-transform:uppercase;line-height:21px;color:#a0b0b9}.main__ticket .flight__case{display:flex}.main__ticket .flight__case div{width:141px;letter-spacing:.5px;margin-right:20px;margin-bottom:13px}.main__ticket .flight__case p{font-size:14px;text-transform:none;letter-spacing:.25px;color:#4a4a4a;line-height:16px}@media(max-width: 800px){.main__ticket{margin:20px auto}}@media(max-width: 550px){.main__ticket{width:100%}}.button{display:block;width:502px;height:50px;background-color:#2196f3;color:#fff;text-transform:uppercase;border:none;font-family:"Open Sans";border-radius:5px;font-size:11px;letter-spacing:1.2px;cursor:pointer;margin:0 auto;transition:all 150ms linear}.button:active{background-color:#2195f3a2}@media(max-width: 600px){.button{width:100%}}.menu__filters-fromto{display:block;box-sizing:border-box;width:232px;font-family:"Open Sans";font-size:13px;background-color:#fff;color:#4a4a4a;box-shadow:0px 2px 8px rgba(0,0,0,.1);border-radius:5px;padding:16px}.menu__filters-fromto label{display:block}.menu__filters-fromto input{border:1px solid #2196f3;width:100%;height:25px;margin:10px 0px;border-radius:4px;outline:none}.menu__filters-fromto .button{width:100%;margin-top:5px;height:30px}.menu__filters-fromto .button button{background-color:transparent;border:none;width:100%;height:100%;cursor:pointer;color:#fff}@media(max-width: 800px){.menu__filters-fromto{height:95%;width:100%}}*{margin:0;padding:0}body{background:#f3f7fa}.container{display:block;max-width:1350px;margin:50px auto 50px}.header .logo{display:block;margin:32px auto 38px;padding:0}.section{display:flex;flex-direction:row;justify-content:center}@media(max-width: 800px){.container{margin:20px auto 0}.section{flex-direction:column;margin:0px 20px}.header .logo{margin:0px auto 18px}}.refs{display:fixed;position:fixed;top:-3%;left:-2%;width:200px;text-decoration:none;margin:50px auto;text-align:center;align-items:center;justify-content:space-around}.refs__back-img{opacity:.5;width:35px;height:35px;margin-right:10px;border-radius:100%;transition:all 200ms linear}.refs__back-img:hover{opacity:1;box-shadow:0px 0px 10px 15px rgba(255,255,255,.137)}@media(max-width: 600px){.container{margin:5px auto 0}.header .logo{margin:0px auto 5px}}',""]);const _=f},645:e=>{e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var i="",n=void 0!==t[5];return t[4]&&(i+="@supports (".concat(t[4],") {")),t[2]&&(i+="@media ".concat(t[2]," {")),n&&(i+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),i+=e(t),n&&(i+="}"),t[2]&&(i+="}"),t[4]&&(i+="}"),i})).join("")},t.i=function(e,i,n,r,o){"string"==typeof e&&(e=[[null,e,void 0]]);var s={};if(n)for(var a=0;a<this.length;a++){var c=this[a][0];null!=c&&(s[c]=!0)}for(var l=0;l<e.length;l++){var d=[].concat(e[l]);n&&s[d[0]]||(void 0!==o&&(void 0===d[5]||(d[1]="@layer".concat(d[5].length>0?" ".concat(d[5]):""," {").concat(d[1],"}")),d[5]=o),i&&(d[2]?(d[1]="@media ".concat(d[2]," {").concat(d[1],"}"),d[2]=i):d[2]=i),r&&(d[4]?(d[1]="@supports (".concat(d[4],") {").concat(d[1],"}"),d[4]=r):d[4]="".concat(r)),t.push(d))}},t}},667:e=>{e.exports=function(e,t){return t||(t={}),e?(e=String(e.__esModule?e.default:e),/^['"].*['"]$/.test(e)&&(e=e.slice(1,-1)),t.hash&&(e+=t.hash),/["'() \t\n]|(%20)/.test(e)||t.needQuotes?'"'.concat(e.replace(/"/g,'\\"').replace(/\n/g,"\\n"),'"'):e):e}},81:e=>{e.exports=function(e){return e[1]}},379:e=>{var t=[];function i(e){for(var i=-1,n=0;n<t.length;n++)if(t[n].identifier===e){i=n;break}return i}function n(e,n){for(var o={},s=[],a=0;a<e.length;a++){var c=e[a],l=n.base?c[0]+n.base:c[0],d=o[l]||0,p="".concat(l," ").concat(d);o[l]=d+1;var m=i(p),f={css:c[1],media:c[2],sourceMap:c[3],supports:c[4],layer:c[5]};if(-1!==m)t[m].references++,t[m].updater(f);else{var h=r(f,n);n.byIndex=a,t.splice(a,0,{identifier:p,updater:h,references:1})}s.push(p)}return s}function r(e,t){var i=t.domAPI(t);return i.update(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;i.update(e=t)}else i.remove()}}e.exports=function(e,r){var o=n(e=e||[],r=r||{});return function(e){e=e||[];for(var s=0;s<o.length;s++){var a=i(o[s]);t[a].references--}for(var c=n(e,r),l=0;l<o.length;l++){var d=i(o[l]);0===t[d].references&&(t[d].updater(),t.splice(d,1))}o=c}}},569:e=>{var t={};e.exports=function(e,i){var n=function(e){if(void 0===t[e]){var i=document.querySelector(e);if(window.HTMLIFrameElement&&i instanceof window.HTMLIFrameElement)try{i=i.contentDocument.head}catch(e){i=null}t[e]=i}return t[e]}(e);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");n.appendChild(i)}},216:e=>{e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},565:(e,t,i)=>{e.exports=function(e){var t=i.nc;t&&e.setAttribute("nonce",t)}},795:e=>{e.exports=function(e){var t=e.insertStyleElement(e);return{update:function(i){!function(e,t,i){var n="";i.supports&&(n+="@supports (".concat(i.supports,") {")),i.media&&(n+="@media ".concat(i.media," {"));var r=void 0!==i.layer;r&&(n+="@layer".concat(i.layer.length>0?" ".concat(i.layer):""," {")),n+=i.css,r&&(n+="}"),i.media&&(n+="}"),i.supports&&(n+="}");var o=i.sourceMap;o&&"undefined"!=typeof btoa&&(n+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(o))))," */")),t.styleTagTransform(n,e,t.options)}(t,e,i)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},589:e=>{e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}},715:(e,t,i)=>{e.exports=i.p+"d7d7b8359eeb9cddfba6.ttf"},422:(e,t,i)=>{e.exports=i.p+"d7261533b9a545ddc769.ttf"},747:(e,t,i)=>{e.exports=i.p+"875570e8ab232496c500.svg"},13:(e,t,i)=>{e.exports=i.p+"b3ce3c21e1b482d2d37a.svg"}},t={};function i(n){var r=t[n];if(void 0!==r)return r.exports;var o=t[n]={id:n,exports:{}};return e[n](o,o.exports,i),o.exports}i.m=e,i.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return i.d(t,{a:t}),t},i.d=(e,t)=>{for(var n in t)i.o(t,n)&&!i.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},i.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e;i.g.importScripts&&(e=i.g.location+"");var t=i.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var n=t.getElementsByTagName("script");n.length&&(e=n[n.length-1].src)}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),i.p=e})(),i.b=document.baseURI||self.location.href,(()=>{var e=i(379),t=i.n(e),n=i(795),r=i.n(n),o=i(569),s=i.n(o),a=i(565),c=i.n(a),l=i(216),d=i.n(l),p=i(589),m=i.n(p),f=i(800),h={};h.styleTagTransform=m(),h.setAttributes=c(),h.insert=s().bind(null,"head"),h.domAPI=r(),h.insertStyleElement=d(),t()(f.Z,h),f.Z&&f.Z.locals&&f.Z.locals;(new class{_Tickets=[];_Companies=[];_Segments=[];_filteredTickets=[];_filteredCompanies=[];_filteredSegments=[];_sorting="chipest";_ticketsTemplate;_origin;_destination;_countOfDisplayedItem=5;constructor(){this._Companies=new class{_companies=[];constructor(){}fetchList(){return fetch("./json/companies.json").then((e=>e.json())).then((e=>{this._companies=[...e]})).catch((e=>console.warn(e.message)))}createTemplate(e){let t=this._companies.find((t=>t.id===e));return`<img id=""${t.id}class="header__logo-img" src="./img/${t.logo}" alt="company-logo" />`}},this._Segments=new class{_segments;constructor(){}fetchList(){return fetch("./json/segments.json").then((e=>e.json())).then((e=>{this._segments=[...e]})).catch((e=>console.warn(e.message)))}createTemplate(e){return e.map((e=>{document.createElement("div");let t=this._segments.find((t=>t.id===e)),i=`${new Date(t.dateStart).getHours()>9?new Date(t.dateStart).getHours():"0"+new Date(t.dateStart).getHours()} \n                      : ${new Date(t.dateStart).getMinutes()<10?new Date(t.dateStart).getMinutes()+"0":new Date(t.dateStart).getMinutes()}`,n=`${new Date(t.dateEnd).getHours()>9?new Date(t.dateEnd).getHours():"0"+new Date(t.dateEnd).getHours()} \n                      : ${new Date(t.dateEnd).getMinutes()<10?new Date(t.dateEnd).getMinutes()+"0":new Date(t.dateEnd).getMinutes()}`,r=`${new Date(t.duration).getHours()>9?new Date(t.duration).getHours():"0"+new Date(t.duration).getHours()}ч \n                      : ${new Date(t.duration).getMinutes()<10?"0"+new Date(t.duration).getMinutes():new Date(t.duration).getMinutes()}м`,o=null;switch(t.stops.length){case 0:o="Без пересадок";break;case 1:o="1 пересадка";break;case 2:o="2 пересадки";break;case 3:o="3 пересадки";break;case 4:o="4 пересадки"}return`\n        <div class="flight__case">\n          <div>${t.origin} – ${t.destination}<p>${i} - ${n}</p>\n          </div>\n          <div>В ПУТИ<p>${r}</p>\n          </div>\n          <div>${o}<p>${t.stops}</p>\n          </div>\n        </div>\n      `})).join("")}}}listeners(){document.querySelector("#button").onclick=e=>this.showFromTo(e),document.querySelector(".menu__filters-transfer-list").onclick=()=>this.reloadFilteredTickets(),document.querySelector(".menu__filters-company-list").onclick=()=>this.reloadFilteredTickets(),document.querySelector("#show-more").onclick=()=>this.showMoreTickets(),document.querySelector("#chipest").onclick=e=>this.makeSort(e.target.id),document.querySelector("#fastest").onclick=e=>this.makeSort(e.target.id),document.querySelector("#optimal").onclick=e=>this.makeSort(e.target.id)}showMoreTickets(){this.reloadFilteredTickets(!0)}reloadFilteredTickets(e){!0===e?this._countOfDisplayedItem+=5:this._countOfDisplayedItem=5,this._filteredSegments=[...this._Segments._segments],this._filteredCompanies=[...this._Companies._companies],this._filteredTickets=JSON.stringify(this._Tickets),this._filteredTickets=JSON.parse(this._filteredTickets),this.makeFromTo(),this.makeTransferFilter(),this.makeCompanyFilter(),this.makeSort(this._sorting)}makeSort(e){switch(this._sorting=e,document.querySelector("#fastest").classList.remove("active"),document.querySelector("#chipest").classList.remove("active"),document.querySelector("#optimal").classList.remove("active"),document.querySelector(`#${e}`).classList.toggle("active"),e){case"chipest":this.showChipest();break;case"fastest":this.showFastest();break;case"optimal":this.showOptimal()}this.createTemplate()}makeCompanyFilter(){const e=document.querySelectorAll(".radio");let t="";for(let i=0;i<3;i++)e[i].checked&&(t=e[i].id);this._filteredCompanies="radio_1"===t||""===t?this._filteredCompanies=[...this._Companies._companies]:this._filteredCompanies.filter((e=>e.id===t)),this._filteredTickets=this._filteredTickets.filter((e=>this._filteredCompanies.filter((t=>t.id===e.companyId))[0]?.id===e.companyId))}makeTransferFilter(){const e=document.querySelectorAll("#checkbox");let t=[];for(let i=0;i<4;i++)t.push(+e[i].checked);this._filteredSegments="0000"===t.join("")?this._filteredSegments=[...this._Segments._segments]:this._Segments._segments.filter((e=>t[e.stops.length])),this._filteredTickets=this._filteredTickets.filter((e=>(e.segments=e.segments.filter((e=>this._filteredSegments.find((t=>t.id===e))?.id===e)),e.segments.length>0)))}showFromTo(e){if(e.preventDefault(),this._origin=document.querySelector("#from").value.toUpperCase(),this._destination=document.querySelector("#to").value.toUpperCase(),console.log(this._origin),console.log(this._destination),""!==document.querySelector("#from").value&&""!==document.querySelector("#to"))return document.querySelector("#from").style.borderColor="#2196f3",document.querySelector("#to").style.borderColor="#2196f3",this.reloadFilteredTickets(),console.log("bb"),!0;document.querySelector("#from").style.borderColor="red",document.querySelector("#to").style.borderColor="red"}makeFromTo(){void 0!==this._origin&&void 0!==this._destination&&(this._filteredSegments=this._Segments._segments.filter((e=>e.origin===this._origin&&e.destination===this._destination)),this._filteredTickets=this._filteredTickets.filter((e=>(e.segments=e.segments.filter((e=>this._filteredSegments.find((t=>t.id===e))?.id===e)),e.segments.length>0)))),console.log("aa")}showChipest(){this._filteredTickets.sort(((e,t)=>e.price-t.price))}showFastest(){this._filteredSegments.sort(((e,t)=>e.duration-t.duration)),this._filteredTickets.sort(((e,t)=>this._filteredSegments.findIndex((t=>t.id===e.segments[0]))-this._filteredSegments.findIndex((e=>e.id===t.segments[0]))))}showOptimal(){this._filteredTickets.sort(((e,t)=>e.price-t.price))}fetchListsFromJSON(){this._Companies.fetchList(),this._Segments.fetchList(),this.fetchList(),this.listeners()}fetchList(){return fetch("./json/tickets.json").then((e=>e.json())).then((e=>{this._Tickets=[...e],this._filteredSegments=[...this._Segments._segments],this._filteredTickets=JSON.stringify(this._Tickets),this._filteredTickets=JSON.parse(this._filteredTickets),this.createTemplate()})).catch((e=>console.warn(e.message)))}async createTemplate(){return this._filteredTickets=[...this._filteredTickets.slice(0,this._countOfDisplayedItem)],document.querySelector(".tickets").innerHTML="",this._ticketsTemplate=await this._filteredTickets.map((e=>{let t=document.createElement("div");return t.innerHTML+=`\n      <div class="main__ticket" id="${e.id}">\n        <div class="header">\n          <div class="header__price">${e.price} Р</div>\n          <div class="header__logo">${this._Companies.createTemplate(e.companyId)}</div>\n        </div>\n        <div class="flight">\n          ${this._Segments.createTemplate(e.segments)}\n        </div>\n      </div>\n    `,t})),this._ticketsTemplate.map((e=>{document.querySelector(".tickets").appendChild(e)}))}}).fetchListsFromJSON()})()})();